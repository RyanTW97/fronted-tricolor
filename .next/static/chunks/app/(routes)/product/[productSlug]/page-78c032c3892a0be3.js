(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{5501:(e,t,a)=>{Promise.resolve().then(a.bind(a,2770))},2770:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var l=a(5155),s=a(7165),r=a(6046),i=a(7396),o=a(5488);let n=()=>(0,l.jsxs)("div",{className:"grid sm:grid-col-2 sm:py-16 sm:p-40",children:[(0,l.jsx)(o.E,{className:"h-[200px] w-[350px] rounded-xl"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(o.E,{className:"h-4 w-[250px]"}),(0,l.jsx)(o.E,{className:"h-4 w-[200px]"}),(0,l.jsx)(o.E,{className:"h-4 w-[200px]"}),(0,l.jsx)(o.E,{className:"h-4 w-[200px]"})]})]});var d=a(2115),c=a(2983),u=a(7551),m=a(5565),x=a(5897),h=a(1068);let p=e=>e.startsWith("http")?e:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e),v=(e,t)=>e-t/100*e,b=e=>{var t,a,s,r;let{product:i,colors:o,presentations:n,selectedColor:d,setSelectedColor:b,selectedPresentation:g,setSelectedPresentation:f,selectedPrice:j,setSelectedPrice:N}=e,{productName:y,description:w,category:E,images:k,discountPercentage:P,isOffer:S,selloCalidad:C}=i,{addItem:A}=(0,x._)(),D=e=>{f(e),N(n[e].precio)};return(0,l.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-3xl sm:text-4xl font-bold text-blue-800 mb-4",children:[y,(0,l.jsx)(u.A,{})]}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:null==E?void 0:null===(a=E.data)||void 0===a?void 0:null===(t=a.attributes)||void 0===t?void 0:t.categoryName}),S&&P>0&&(0,l.jsxs)("div",{className:"bg-red-600 text-white text-sm py-2 px-4 rounded-md animate-scale-pulse w-fit shadow-md mx-auto text-center",children:["Este producto tiene ",P,"% de descuento"]}),(null==C?void 0:null===(r=C.data)||void 0===r?void 0:null===(s=r.attributes)||void 0===s?void 0:s.url)&&(0,l.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center pt-6",children:[(0,l.jsx)(m.default,{src:p(C.data.attributes.url),alt:"Sello de calidad inen",height:50,width:150,className:"mb-2"}),(0,l.jsx)("div",{className:"text-blue-800 font-semibold",children:"Este sello cuenta con calidad inen"})]}),(0,l.jsx)("p",{className:"text-lg text-gray-700 mt-6",style:{whiteSpace:"pre-line",textAlign:"justify"},children:w})]}),o.length>0&&(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Colores Disponibles:"}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-10",children:o.map((e,t)=>(0,l.jsxs)("div",{onClick:()=>b(e.titulo),className:"cursor-pointer flex flex-col items-center transition-transform duration-300 transform hover:scale-105",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full border ".concat(d===e.titulo?"border-blue-800 shadow-lg":"border-gray-300"),style:{backgroundColor:e.codigo}}),(0,l.jsx)("span",{className:"mt-2 text-sm ".concat(d===e.titulo?"font-bold text-blue-800":"text-gray-600"),children:e.titulo})]},t))}),(0,l.jsxs)("h1",{className:"text-gray-500  text-sm",children:[(0,l.jsx)("span",{className:"text-gray-800",children:"Nota:"})," Los colores mostrados son referenciales y pueden presentar variaciones en la versi\xf3n original."]})]}),(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Presentaciones Disponibles:"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-4",children:n.map((e,t)=>(0,l.jsx)("button",{onClick:()=>D(t),className:"px-6 py-2 border rounded-lg transition duration-300 ".concat(g===t?"bg-blue-800 text-white":"bg-white text-blue-800"),children:e.presentacion},t))})]}),(0,l.jsxs)("div",{className:"mt-10",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-blue-800",children:"Precio:"}),S&&P>0&&j?(0,l.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,l.jsxs)("span",{className:"text-lg text-gray-500 line-through",children:["$",j.toFixed(2)]}),(0,l.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["$",v(j,P).toFixed(2)]})]}):(0,l.jsxs)("span",{className:"text-lg font-bold text-gray-900 mt-2 block",children:["$",j?j.toFixed(2):"0.00"]})]}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(c.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{var e,t,a;if(null===g||null===j){h.oR.error("Selecciona una presentaci\xf3n antes de a\xf1adir al carrito");return}let l=n[g],s=(null==k?void 0:null===(a=k.data)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:null===(e=t.attributes)||void 0===e?void 0:e.url)?k.data[0].attributes.url.startsWith("http")?k.data[0].attributes.url:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(k.data[0].attributes.url):null,r={...i,image:s,quantity:1,prices:[{precio:l.precio,presentacion:l.presentacion}]};try{A(r),h.oR.success("".concat(y," a\xf1adido al carrito \uD83D\uDED2"))}catch(e){h.oR.error("Error al a\xf1adir el producto al carrito")}},className:"w-full bg-blue-800 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300",children:"A\xf1adir al carrito"})})]})},g=e=>e.startsWith("http")?e:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e),f=e=>{let{images:t}=e,[a,s]=(0,d.useState)(0),r=(Array.isArray(t)?t:(null==t?void 0:t.data)||[]).map(e=>{var t;return{url:g(e.url),thumbnailUrl:(null===(t=e.formats)||void 0===t?void 0:t.thumbnail)?g(e.formats.thumbnail.url):g(e.url),alt:e.alt||"Product Image"}});return(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,l.jsx)("div",{className:"relative w-full h-[400px] sm:h-[500px] shadow-lg rounded-lg overflow-hidden",children:r.length>0?(0,l.jsx)(m.default,{src:r[a].url,alt:r[a].alt,fill:!0,style:{objectFit:"contain"},className:"rounded-lg"}):(0,l.jsx)("p",{className:"text-gray-500",children:"No hay im\xe1genes disponibles"})}),(0,l.jsx)("div",{className:"flex overflow-x-auto space-x-4 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:r.map((e,t)=>(0,l.jsx)("div",{className:"w-20 h-20 border-2 rounded-md overflow-hidden cursor-pointer transition-transform duration-300 ".concat(a===t?"border-black scale-105":"border-gray-300"),onClick:()=>s(t),children:(0,l.jsx)(m.default,{src:e.thumbnailUrl,alt:e.alt,width:80,height:80,style:{objectFit:"cover"},className:"rounded-md hover:scale-110 transition-transform"})},t))})]})},j=()=>{var e,t,a,o,c,u,m,x,h,p,v;let{productSlug:g}=(0,r.useParams)(),{result:j}=(0,s.J)(g),[N,y]=(0,d.useState)(null),[w,E]=(0,d.useState)(null),[k,P]=(0,d.useState)(null);if((0,d.useEffect)(()=>{if(null==j?void 0:j.length){var e,t;let a=null===(e=j[0])||void 0===e?void 0:e.attributes;if(!a)return;let l=a.color||[],s=a.prices||[];y(l.length?l[0].titulo:null),E(s.length?0:null),P(s.length?(null===(t=s[0])||void 0===t?void 0:t.precio)||0:null)}},[j]),!(null==j?void 0:j.length))return(0,l.jsx)(n,{});let S=j[0],C=S.attributes,A={...C,id:S.id},D=(null===(t=C.images)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.map(e=>({url:e.attributes.url.startsWith("http")?e.attributes.url:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e.attributes.url),alt:e.attributes.name})))||[];return(0,l.jsx)("div",{className:"flex flex-col min-h-screen",children:(0,l.jsx)("main",{className:"flex-1",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto py-10 px-4 sm:px-8",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:[(0,l.jsx)(i.default,{href:"/category/".concat(null===(c=C.category)||void 0===c?void 0:null===(o=c.data)||void 0===o?void 0:null===(a=o.attributes)||void 0===a?void 0:a.slug),className:"text-blue-800 hover:underline transition duration-300",children:null===(x=C.category)||void 0===x?void 0:null===(m=x.data)||void 0===m?void 0:null===(u=m.attributes)||void 0===u?void 0:u.categoryName})," ","/"," ",(0,l.jsx)("span",{className:"font-bold text-blue-800",children:C.productName})]}),(0,l.jsxs)("section",{className:"grid grid-cols-1 sm:grid-cols-2 gap-10",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(f,{images:D}),(null===(v=C.fichaTecnica)||void 0===v?void 0:null===(p=v.data)||void 0===p?void 0:null===(h=p.attributes)||void 0===h?void 0:h.url)&&(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)("a",{href:C.fichaTecnica.data.attributes.url.startsWith("http")?C.fichaTecnica.data.attributes.url:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(C.fichaTecnica.data.attributes.url),target:"_blank",rel:"noopener noreferrer",className:"block w-full text-center bg-blue-800 text-white py-3 rounded-md shadow-lg hover:bg-blue-900 transition duration-300",children:"Ficha T\xe9cnica"})})]}),(0,l.jsx)(b,{product:A,colors:C.color||[],presentations:C.prices||[],selectedColor:N,setSelectedColor:y,selectedPresentation:w,setSelectedPresentation:E,selectedPrice:k,setSelectedPrice:P})]})]})})})}},7165:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});var l=a(2115);function s(e){let t="".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com","/api/products?filters[slug][$eq]=").concat(e,"&populate=*"),[a,s]=(0,l.useState)(null),[r,i]=(0,l.useState)(""),[o,n]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch(t),a=await e.json();s(a.data)}catch(e){i(e.message||"Error desconocido")}finally{n(!1)}})()},[t]),{loading:o,result:a,error:r}}},7551:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(5155);let s=()=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("hr",{className:"border-t-2 border-gray-300 my-4"})})},5488:(e,t,a)=>{"use strict";a.d(t,{E:()=>r});var l=a(5155),s=a(9602);function r(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},5897:(e,t,a)=>{"use strict";a.d(t,{_:()=>r});var l=a(9827),s=a(709);let r=(0,l.v)((0,s.Zr)((e,t)=>({items:[],addItem:a=>{var l,s;if(console.log("Intentando a\xf1adir producto al carrito:",a),!a||!a.id||!a.productName||!(null===(s=a.prices)||void 0===s?void 0:null===(l=s[0])||void 0===l?void 0:l.precio)){console.error("Datos incompletos del producto:",a);return}let r=a.image||null,i={...a,image:r},o=t().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",o),o.find(e=>{var t,l,s,r;return e.id===a.id&&(null===(l=e.prices)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.presentacion)===(null===(r=a.prices)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:o.map(e=>{var t,l,s,r;return e.id===a.id&&(null===(l=e.prices)||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.presentacion)===(null===(r=a.prices)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...o,{...i,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",t().items)},removeItem:a=>{console.log("Eliminando producto con ID:",a);let l=t().items.filter(e=>e.id!==a);e({items:l}),console.log("Estado del carrito despu\xe9s de eliminar:",l)},updateQuantity:(a,l)=>{console.log("Actualizando cantidad del producto con ID:",a,"a:",l),l<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:t().items.filter(e=>e.id!==a)})):e({items:t().items.map(e=>e.id===a?{...e,quantity:l}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",t().items)}}),{name:"cart-storage",storage:(0,s.KU)(()=>localStorage)}))},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var l=a(3463),s=a(9795);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,l.$)(t))}},6046:(e,t,a)=>{"use strict";var l=a(6658);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,2983,4839,1181,8275,8441,1517,7358],()=>t(5501)),_N_E=e.O()}]);