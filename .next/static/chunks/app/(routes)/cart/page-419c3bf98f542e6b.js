(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{8185:(e,t,o)=>{Promise.resolve().then(o.bind(o,2855))},2855:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var r=o(5155),s=o(7551),i=o(4085),a=o(5897),l=o(6261),n=o(1864),d=o(5686);function c(){let{items:e,removeAll:t,removeItem:o,updateQuantity:c}=(0,a._)(),m=e.reduce((e,t)=>{let o=Array.isArray(t.prices)?t.prices:[];if(o.length>0){var r;let s=parseFloat((null===(r=o[0])||void 0===r?void 0:r.precio)||"0"),i=t.discountPercentage||0;return e+(i>0?s-i/100*s:s)*(t.quantity||1)}return e},0);return console.log("Productos en el carrito:",e),(0,r.jsxs)("div",{className:"min-h-screen max-w-6xl px-4 py-16 mx-auto sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"mb-8 text-3xl text-blue-700 font-bold text-center sm:text-left",children:"Carrito de compras"}),(0,r.jsxs)("div",{className:"grid gap-8 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[0===e.length&&(0,r.jsx)("p",{className:"text-center text-gray-500",children:"No hay productos en el carrito."}),(0,r.jsx)("ul",{className:"space-y-6",children:e.map((e,t)=>{var s,i,a,m;if(!e)return(0,r.jsx)("li",{children:(0,r.jsx)("p",{children:"Error: No se recibi\xf3 informaci\xf3n del producto."})},"undefined-".concat(t));let u=Array.isArray(e.prices)?e.prices:[],p=u.length>0?parseFloat((null===(s=u[0])||void 0===s?void 0:s.precio)||"0"):0,x=e.discountPercentage||0,g=e.quantity||1,v=x>0?(p-x/100*p).toFixed(2):p.toFixed(2),h=e.image?e.image:(null===(a=e.images)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.url)?"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e.images[0].url):"https://via.placeholder.com/150",b=u.length>0?null===(m=u[0])||void 0===m?void 0:m.presentacion:"default",f="".concat(e.id,"-").concat(b);return(0,r.jsxs)("li",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 rounded-lg shadow-lg bg-white",children:[(0,r.jsx)("img",{src:h,alt:e.productName||"Producto",className:"h-24 w-24 rounded-md object-contain cursor-pointer sm:h-32 sm:w-32",onClick:()=>{window.location.href="/product/".concat(e.slug)}}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:e.productName}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-500",children:"Cantidad:"}),(0,r.jsx)("button",{className:"ml-2 text-sm px-2 py-1 border rounded-l-md bg-gray-200 hover:bg-gray-300",onClick:()=>c(e.id,Math.max(g-1,1)),children:(0,r.jsx)(l.A,{size:16})}),(0,r.jsx)("span",{className:"px-3 py-1 text-sm font-semibold border",children:g}),(0,r.jsx)("button",{className:"text-sm px-2 py-1 border rounded-r-md bg-gray-200 hover:bg-gray-300",onClick:()=>c(e.id,g+1),children:(0,r.jsx)(n.A,{size:16})})]}),(0,r.jsxs)("p",{className:"mt-1 text-sm font-semibold text-gray-500",children:["Presentaci\xf3n: ",b]}),x>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Precio Regular:"," ",(0,r.jsxs)("s",{className:"text-red-500",children:["$",p.toFixed(2)]})]}),(0,r.jsxs)("p",{className:"text-sm text-emerald-600 font-bold",children:["Precio con Descuento: $",v]})]}):(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500 font-bold",children:["Precio: $",p.toFixed(2)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Total: $",(parseFloat(v)*g).toFixed(2)]})]}),(0,r.jsx)("button",{className:"rounded-full p-2 bg-red-500 text-white hover:bg-red-600 transition",onClick:()=>{console.log("Eliminar producto con ID: ".concat(e.id)),o(e.id)},children:(0,r.jsx)(d.A,{size:18})})]},f)})})]}),(0,r.jsxs)("div",{className:"p-6 bg-gray-100 rounded-lg shadow-lg",children:[(0,r.jsx)("p",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Resumen de pedido"}),(0,r.jsx)(s.A,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Orden total:"}),(0,r.jsxs)("p",{className:"text-lg font-bold text-gray-800",children:["$",m.toFixed(2)]})]}),(0,r.jsx)(i.$,{className:"w-full py-2 mt-4 text-white bg-blue-500 hover:bg-blue-600 transition",onClick:()=>console.log("buy"),children:"Comprar"})]})]})]})}},7551:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var r=o(5155);let s=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("hr",{className:"border-t-2 border-gray-300 my-4"})})},4085:(e,t,o)=>{"use strict";o.d(t,{$:()=>d});var r=o(5155),s=o(2115),i=o(2317),a=o(1027),l=o(9602);let n=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:o,variant:s,size:a,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,r.jsx)(m,{className:(0,l.cn)(n({variant:s,size:a,className:o})),ref:t,...c})});d.displayName="Button"},5897:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var r=o(9827),s=o(709);let i=(0,r.v)((0,s.Zr)((e,t)=>({items:[],addItem:o=>{var r,s;if(console.log("Intentando a\xf1adir producto al carrito:",o),!o||!o.id||!o.productName||!(null===(s=o.prices)||void 0===s?void 0:null===(r=s[0])||void 0===r?void 0:r.precio)){console.error("Datos incompletos del producto:",o);return}let i=o.image||null,a={...o,image:i},l=t().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",l),l.find(e=>{var t,r,s,i;return e.id===o.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(i=o.prices)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:l.map(e=>{var t,r,s,i;return e.id===o.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(i=o.prices)||void 0===i?void 0:null===(s=i[0])||void 0===s?void 0:s.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...l,{...a,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",t().items)},removeItem:o=>{console.log("Eliminando producto con ID:",o);let r=t().items.filter(e=>e.id!==o);e({items:r}),console.log("Estado del carrito despu\xe9s de eliminar:",r)},updateQuantity:(o,r)=>{console.log("Actualizando cantidad del producto con ID:",o,"a:",r),r<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:t().items.filter(e=>e.id!==o)})):e({items:t().items.map(e=>e.id===o?{...e,quantity:r}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",t().items)}}),{name:"cart-storage",storage:(0,s.KU)(()=>localStorage)}))},9602:(e,t,o)=>{"use strict";o.d(t,{cn:()=>i});var r=o(3463),s=o(9795);function i(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,s.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[181,613,441,517,358],()=>t(8185)),_N_E=e.O()}]);