(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{5654:(e,t,r)=>{Promise.resolve().then(r.bind(r,7034))},7034:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var o=r(5155),i=r(2115),a=r(9070),s=r(5897),l=r(8474);let n=(0,r(7401).A)("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);var c=r(5565),d=r(7396),u=r(1068);function m(){let{favorites:e,removeFavorite:t}=(0,a.r)(),{addItem:r}=(0,s._)(),[m,p]=(0,i.useState)({});(0,i.useEffect)(()=>{console.log("Favoritos cargados:",e)},[e]);let x=(e,t)=>{p(r=>({...r,[e]:t}))},g=(e,r)=>{t(e),u.oR.info('"'.concat(r,'" ha sido eliminado de tus favoritos ❤️'))},v=(e,t)=>{try{let o=e.attributes,i=o.prices.find(e=>e.presentacion===t),a=(null==i?void 0:i.precio)||0;if(!a){u.oR.error("No se pudo a\xf1adir el producto al carrito");return}let s=Number(o.discountPercentage)||0;r({id:e.id,productName:o.productName,slug:o.slug,description:o.description,image:h(o.images),quantity:1,prices:[{precio:a,presentacion:t}],discountPercentage:s,discountedPrice:s>0?a-a*s/100:null}),u.oR.success("".concat(o.productName," a\xf1adido al carrito \uD83D\uDED2"))}catch(e){console.error("Error inesperado:",e),u.oR.error("Ocurri\xf3 un error. Int\xe9ntalo nuevamente.")}},h=e=>{var t,r;if((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)>0){let t=e.data[0];if(null==t?void 0:null===(r=t.attributes)||void 0===r?void 0:r.url){let e=t.attributes.url;return e.startsWith("http")?e:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e)}}return"/placeholder.png"};return(0,o.jsx)("div",{className:"flex flex-col min-h-screen bg-gray-100",children:(0,o.jsxs)("main",{className:"flex-1 max-w-6xl px-4 py-16 mx-auto sm:px-6 lg:px-8",children:[(0,o.jsx)("h1",{className:"mb-8 text-3xl text-blue-700 font-bold text-center sm:text-left",children:"Productos Favoritos"}),(0,o.jsxs)("div",{className:"grid gap-8",children:[0===e.length&&(0,o.jsx)("p",{className:"text-center text-gray-500",children:"No tienes productos favoritos."}),(0,o.jsx)("ul",{className:"space-y-6",children:e.map((e,t)=>{var r;if(!e||!e.attributes)return(0,o.jsx)("li",{children:(0,o.jsx)("p",{children:"Error: No se recibi\xf3 informaci\xf3n del producto."})},"undefined-".concat(t));let i=e.attributes,a=h(i.images),s=Array.isArray(i.prices)?i.prices:[],u=m[e.id]||(s.length>0?s[0].presentacion:"N/A"),p=parseFloat((null===(r=s.find(e=>e.presentacion===u))||void 0===r?void 0:r.precio)||"0")||0,f=parseFloat(i.discountPercentage)||0,N=f>0?(p-p*f/100).toFixed(2):p.toFixed(2);return(0,o.jsxs)("li",{className:"relative flex flex-col sm:flex-row items-center gap-4 p-4 rounded-lg shadow-lg bg-white max-w-lg mx-auto",children:[(0,o.jsx)(d.default,{href:"/product/".concat(i.slug),passHref:!0,children:(0,o.jsx)("div",{className:"relative w-24 h-24 sm:w-32 sm:h-32 rounded-md overflow-hidden cursor-pointer",children:(0,o.jsx)(c.default,{src:a,alt:i.productName||"Producto",layout:"fill",objectFit:"contain"})})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-md font-bold text-gray-800",children:i.productName||"Producto sin nombre"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:i.description}),f>0&&(0,o.jsx)("p",{className:"text-sm font-semibold text-green-600",children:"Descuento: ".concat(f,"%")}),s.length>0&&(0,o.jsxs)("div",{className:"mt-2",children:[(0,o.jsx)("p",{className:"text-xs font-semibold text-gray-800",children:"Presentaciones:"}),(0,o.jsx)("div",{className:"flex gap-1 mt-1",children:s.map((t,r)=>(0,o.jsx)("button",{className:"px-2 py-1 border rounded-md text-xs ".concat(u===t.presentacion?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800"),onClick:()=>x(e.id,t.presentacion),children:t.presentacion},"".concat(e.id,"-").concat(r)))})]}),(0,o.jsx)("div",{className:"mt-2",children:f>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("span",{className:"text-xs text-red-600 line-through mr-2",children:["$",p.toFixed(2)]}),(0,o.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",N]})]}):(0,o.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["$",p.toFixed(2)]})}),(0,o.jsxs)("button",{className:"mt-2 bg-blue-600 text-white py-1 px-3 rounded-lg hover:bg-blue-500 transition flex items-center gap-2 text-sm",onClick:()=>v(e,u),children:[(0,o.jsx)(l.A,{size:16}),"A\xf1adir"]})]}),(0,o.jsx)("button",{className:"absolute top-2 right-2 p-2 rounded-full bg-white shadow-md cursor-pointer z-10",onClick:()=>g(e.id,i.productName),children:(0,o.jsx)(n,{className:"text-red-500",size:18})})]},"".concat(e.id,"-").concat(u))})})]})]})})}},5897:(e,t,r)=>{"use strict";r.d(t,{_:()=>a});var o=r(9827),i=r(709);let a=(0,o.v)((0,i.Zr)((e,t)=>({items:[],addItem:r=>{var o,i;if(console.log("Intentando a\xf1adir producto al carrito:",r),!r||!r.id||!r.productName||!(null===(i=r.prices)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.precio)){console.error("Datos incompletos del producto:",r);return}let a=r.image||null,s={...r,image:a},l=t().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",l),l.find(e=>{var t,o,i,a;return e.id===r.id&&(null===(o=e.prices)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.presentacion)===(null===(a=r.prices)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:l.map(e=>{var t,o,i,a;return e.id===r.id&&(null===(o=e.prices)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.presentacion)===(null===(a=r.prices)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...l,{...s,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",t().items)},removeItem:r=>{console.log("Eliminando producto con ID:",r);let o=t().items.filter(e=>e.id!==r);e({items:o}),console.log("Estado del carrito despu\xe9s de eliminar:",o)},updateQuantity:(r,o)=>{console.log("Actualizando cantidad del producto con ID:",r,"a:",o),o<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:t().items.filter(e=>e.id!==r)})):e({items:t().items.map(e=>e.id===r?{...e,quantity:o}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",t().items)}}),{name:"cart-storage",storage:(0,i.KU)(()=>localStorage)}))},9070:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var o=r(9827),i=r(709);let a=(0,o.v)((0,i.Zr)(e=>({favorites:[],addFavorite:t=>e(e=>({favorites:[...e.favorites,t]})),removeFavorite:t=>e(e=>({favorites:e.favorites.filter(e=>e.id!==t)}))}),{name:"favorites-storage"}))},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(2115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:u,...m}=e;return(0,o.createElement)("svg",{ref:t,...s,width:i,height:i,stroke:r,strokeWidth:n?24*Number(l)/Number(i):l,className:a("lucide",c),...m},[...u.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),n=(e,t)=>{let r=(0,o.forwardRef)((r,s)=>{let{className:n,...c}=r;return(0,o.createElement)(l,{ref:s,iconNode:t,className:a("lucide-".concat(i(e)),n),...c})});return r.displayName="".concat(e),r}},8474:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(7401).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},3463:(e,t,r)=>{"use strict";function o(){for(var e,t,r=0,o="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,o,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(o=e(t[r]))&&(i&&(i+=" "),i+=o)}else for(o in t)t[o]&&(i&&(i+=" "),i+=o)}return i}(e))&&(o&&(o+=" "),o+=t);return o}r.d(t,{$:()=>o,A:()=>i});let i=o}},e=>{var t=t=>e(e.s=t);e.O(0,[839,565,275,441,517,358],()=>t(5654)),_N_E=e.O()}]);