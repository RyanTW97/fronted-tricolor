(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{1557:(e,t,a)=>{Promise.resolve().then(a.bind(a,2010))},2010:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var r=a(5155),i=a(2115),o=a(6046),l=a(2736),s=a(591),d=a(5565),n=a(5007),c=a(7396),u=a(1068),m=a(5897),p=a(9070);let v=e=>{var t,a,o,l,v,g,x,f,h,b,y,N,j,w,C,E,k,P,R,S,A,F,q,D,_,z,I,Z;let{product:$}=e,B=null!==(C=null!==(w=$.slug)&&void 0!==w?w:null===(t=$.attributes)||void 0===t?void 0:t.slug)&&void 0!==C?C:"unknown",L=null!==(k=null!==(E=$.productName)&&void 0!==E?E:null===(a=$.attributes)||void 0===a?void 0:a.productName)&&void 0!==k?k:"Producto sin nombre",O=null!==(R=null!==(P=$.description)&&void 0!==P?P:null===(o=$.attributes)||void 0===o?void 0:o.description)&&void 0!==R?R:"Sin descripci\xf3n",T=null!==(A=null!==(S=$.color)&&void 0!==S?S:null===(l=$.attributes)||void 0===l?void 0:l.color)&&void 0!==A?A:[],W=null!==(q=null!==(F=$.prices)&&void 0!==F?F:null===(v=$.attributes)||void 0===v?void 0:v.prices)&&void 0!==q?q:[],H=null!==(D=$.image)&&void 0!==D?D:"/placeholder.png";if(!$.image&&(null===(b=$.attributes)||void 0===b?void 0:null===(h=b.images)||void 0===h?void 0:null===(f=h.data)||void 0===f?void 0:null===(x=f[0])||void 0===x?void 0:null===(g=x.attributes)||void 0===g?void 0:g.url)){let e=$.attributes.images.data[0].attributes.url;H=e.startsWith("http")?e:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(e)}let Q=null!==(z=null!==(_=$.discountPercentage)&&void 0!==_?_:null===(y=$.attributes)||void 0===y?void 0:y.discountPercentage)&&void 0!==z?z:0,K=Number(Q)||0,[U,V]=(0,i.useState)(null!==(I=null===(N=W[0])||void 0===N?void 0:N.presentacion)&&void 0!==I?I:"\xdanica"),[G,J]=(0,i.useState)(null!==(Z=null===(j=W[0])||void 0===j?void 0:j.precio)&&void 0!==Z?Z:0),M=null;"number"==typeof G&&K>0&&(M=G-G*K/100);let{addItem:X}=(0,m._)(),{favorites:Y,addFavorite:ee,removeFavorite:et}=(0,p.r)(),ea=e=>{let t=W.find(t=>t.presentacion===e);t&&(V(e),J(t.precio))},er=Y.some(e=>e.id===$.id);return(0,r.jsxs)(n.Zp,{className:"border border-gray-200 shadow-lg rounded-lg p-5 flex flex-col justify-between min-h-[450px]",children:[(0,r.jsxs)("div",{className:"relative h-[200px] w-full flex justify-center items-center rounded-lg overflow-hidden mb-4",children:[(0,r.jsx)(c.default,{href:"/product/".concat(B),passHref:!0,children:(0,r.jsx)(d.default,{src:H,alt:L,width:200,height:200,style:{objectFit:"contain"},className:"rounded-lg"})}),(0,r.jsx)(s.A,{className:"absolute top-2 right-2 p-1 rounded-full cursor-pointer shadow-md border-2 ".concat(er?"border-red-600 text-red-600":"border-gray-400 text-gray-400"),onClick:e=>{e.stopPropagation(),Y.some(e=>e.id===$.id)?(et($.id),u.oR.info("Producto removido de favoritos ❤️")):(ee({...$,productName:L,image:H}),u.oR.success("Producto a\xf1adido a favoritos ❤️"))}})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:L}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:O})]}),T.length>0&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"Colores:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:T.map((e,t)=>(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:e.codigo},title:e.titulo},t))})]}),W.length>0?(0,r.jsxs)("div",{className:"mt-4",children:[W.length>1&&(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"Presentaci\xf3n:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:W.map(e=>(0,r.jsx)("button",{className:"py-1 px-3 rounded-lg text-sm ".concat(U===e.presentacion?"bg-blue-700 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),onClick:()=>ea(e.presentacion||"\xdanica"),children:e.presentacion||"\xdanica"},e.presentacion))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[K>0&&null!==M?(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 line-through mr-2",children:["$",G]}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",M.toFixed(2)]})]}):(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:["$",G]}),(0,r.jsx)("button",{className:"bg-blue-700 text-white py-1 px-4 rounded-lg hover:bg-blue-600 transition",onClick:()=>{if(!G){u.oR.error("No se puede a\xf1adir al carrito, precio no disponible");return}X({id:$.id,productName:L,slug:B,description:O,image:H,prices:[{presentacion:U||"\xdanica",precio:G}],quantity:1,active:!0,discountPercentage:Q}),u.oR.success("".concat(L," a\xf1adido al carrito \uD83D\uDED2"))},children:"A\xf1adir al carrito"})]})]}):(0,r.jsx)("p",{className:"mt-4 text-sm font-semibold text-red-600",children:"Precio no disponible"})]})};var g=a(6195),x=a(1027),f=a(9602);let h=(0,x.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(g.b,{ref:t,className:(0,f.cn)(h(),a),...i})});b.displayName=g.b.displayName;var y=a(3486),N=a(3565);let j=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(y.bL,{className:(0,f.cn)("grid gap-2",a),...i,ref:t})});j.displayName=y.bL.displayName;let w=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)(y.q7,{ref:t,className:(0,f.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...i,children:(0,r.jsx)(y.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(N.A,{className:"h-3.5 w-3.5 fill-primary"})})})});w.displayName=y.q7.displayName;let C=e=>{var t;let{setFilterCategory:a,selectedCategory:o}=e,{result:l,loading:s,error:d}=function(){let e="".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com","/api/categories"),[t,a]=(0,i.useState)(null),[r,o]=(0,i.useState)(""),[l,s]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{try{let t=await fetch(e),r=await t.json();a(r),s(!1)}catch(e){o(e.message||"Error desconocido"),s(!1)}})()},[e]),{loading:l,result:t,error:r}}();if(s)return(0,r.jsx)("p",{className:"text-gray-600 animate-pulse",children:"Cargando filtros..."});if(d)return(0,r.jsxs)("p",{className:"text-red-500",children:["Error al cargar categor\xedas: ",d]});let n=(null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.map(e=>{var t,a,r,i;return{id:e.id,slug:null!==(r=null===(t=e.attributes)||void 0===t?void 0:t.slug)&&void 0!==r?r:"sin-slug",categoryName:null!==(i=null===(a=e.attributes)||void 0===a?void 0:a.categoryName)&&void 0!==i?i:"Sin nombre"}}))||[];return n.length>0?(0,r.jsxs)("div",{className:"p-4 bg-white rounded-md shadow-lg",children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-blue-800 mb-4 border-b pb-2",children:"Categor\xedas"}),(0,r.jsx)(j,{value:o,onValueChange:a,className:"space-y-4",children:n.map(e=>{let{id:t,slug:a,categoryName:i}=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-md transition-all duration-300 cursor-pointer hover:bg-blue-50 hover:shadow-sm",children:[(0,r.jsx)(w,{value:a,id:"category-".concat(t),className:"appearance-none border-2 border-gray-300 rounded-full w-5 h-5 checked:bg-blue-800 checked:border-blue-800 focus:outline-none transition-all duration-300"}),(0,r.jsx)(b,{htmlFor:"category-".concat(t),className:"text-gray-700 hover:text-blue-800 font-medium",children:i})]},t)})})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"No hay categor\xedas disponibles."})},E=function(e){let{setFilterCategory:t,selectedCategory:a}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(C,{setFilterCategory:t,selectedCategory:a})})};var k=a(2983);function P(){var e,t,a;let s=(0,o.useParams)(),d=(0,o.useRouter)(),n=null!==(a=s.categorySlug)&&void 0!==a?a:"",{result:c,loading:u,error:m}=function(e){let t="".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com","/api/products?populate=*&filters[category][slug][$eq]=").concat(e),[a,r]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[s,d]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch(t),a=await e.json();r(a.data),l(!1)}catch(e){d(e),l(!1)}})()},[t]),{loading:o,result:a,error:s}}(n),[p,g]=(0,i.useState)(n),[x,f]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{g(n)},[n]),u)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(l.A,{grid:3})});if(m){let e="string"==typeof m?m:(null==m?void 0:m.message)||"Ocurri\xf3 un error";return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("p",{children:["Error al cargar productos: ",e]})})}let h=(c||[]).map(e=>{var t,a,r,i,o,l,s,d,n;if(!(null==e?void 0:e.attributes))return null;let{attributes:c}=e,u=(null===(r=c.category)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:null===(t=a.attributes)||void 0===t?void 0:t.categoryName)||"Categor\xeda no disponible",m=(null===(l=c.category)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:null===(i=o.attributes)||void 0===i?void 0:i.slug)||"",p=c.slug||e.slug||"unknown",v=c.discountPercentage||0,g="/placeholder.png";if((null===(d=c.images)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.length)>0){let e=c.images.data[0],t=null==e?void 0:null===(n=e.attributes)||void 0===n?void 0:n.url;t&&(g=t.startsWith("http")?t:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(t))}return{id:e.id,productName:c.productName||"Producto sin nombre",description:c.description||"Sin descripci\xf3n",image:g,categoryName:u,categorySlug:m,slug:p,presentations:c.prices||[],prices:c.prices||[],color:c.color||[],discountPercentage:v}}).filter(Boolean);return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("header",{className:"sticky top-0 z-10 bg-white shadow-md",children:(0,r.jsx)(k.P.h1,{className:"text-center text-6xl cormorant text-blue-800 py-4",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0,y:-50},visible:{opacity:1,y:0}},transition:{duration:.5},children:(null==h?void 0:null===(e=h[0])||void 0===e?void 0:e.categoryName)||"Categor\xeda no disponible"},(null==h?void 0:null===(t=h[0])||void 0===t?void 0:t.categoryName)||"default")}),(0,r.jsxs)("div",{className:"flex flex-1",children:[(0,r.jsx)("aside",{className:"w-1/4 bg-gray-100 p-4",children:(0,r.jsx)(E,{setFilterCategory:e=>{f(!0),d.push("/category/".concat(e)),setTimeout(()=>f(!1),500)},selectedCategory:p})}),(0,r.jsx)("main",{className:"w-3/4 p-6",children:(0,r.jsx)("div",{className:"grid gap-5 mt-8 md:grid-cols-3 md:gap-10",children:x||u?(0,r.jsx)(l.A,{grid:3}):h.length>0?h.map(e=>(0,r.jsx)(v,{product:e},e.id)):(0,r.jsx)("p",{children:"No se encontraron productos para esta categor\xeda."})})})]})]})}},2736:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),i=a(5488);let o=e=>{let{grid:t}=e;return Array.from({length:t}).map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col gap-8 mx-auto space-y-3",children:[(0,r.jsx)(i.E,{className:"h-[125px] w-[250px] rounded-xl"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.E,{className:"h-4 w-[250px]"}),(0,r.jsx)(i.E,{className:"h-4 w-[250px]"})]})]},t))}},5007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>s,wL:()=>u});var r=a(5155),i=a(2115),o=a(9602);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...i})});l.displayName="Card";let s=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...i})});s.displayName="CardHeader";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",a),...i})});d.displayName="CardTitle";let n=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...i})});n.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...i})});c.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...i})});u.displayName="CardFooter"},5488:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(5155),i=a(9602);function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},5897:(e,t,a)=>{"use strict";a.d(t,{_:()=>o});var r=a(9827),i=a(709);let o=(0,r.v)((0,i.Zr)((e,t)=>({items:[],addItem:a=>{var r,i;if(console.log("Intentando a\xf1adir producto al carrito:",a),!a||!a.id||!a.productName||!(null===(i=a.prices)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.precio)){console.error("Datos incompletos del producto:",a);return}let o=a.image||null,l={...a,image:o},s=t().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",s),s.find(e=>{var t,r,i,o;return e.id===a.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(o=a.prices)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:s.map(e=>{var t,r,i,o;return e.id===a.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(o=a.prices)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...s,{...l,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",t().items)},removeItem:a=>{console.log("Eliminando producto con ID:",a);let r=t().items.filter(e=>e.id!==a);e({items:r}),console.log("Estado del carrito despu\xe9s de eliminar:",r)},updateQuantity:(a,r)=>{console.log("Actualizando cantidad del producto con ID:",a,"a:",r),r<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:t().items.filter(e=>e.id!==a)})):e({items:t().items.map(e=>e.id===a?{...e,quantity:r}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",t().items)}}),{name:"cart-storage",storage:(0,i.KU)(()=>localStorage)}))},9070:(e,t,a)=>{"use strict";a.d(t,{r:()=>o});var r=a(9827),i=a(709);let o=(0,r.v)((0,i.Zr)(e=>({favorites:[],addFavorite:t=>e(e=>({favorites:[...e.favorites,t]})),removeFavorite:t=>e(e=>({favorites:e.favorites.filter(e=>e.id!==t)}))}),{name:"favorites-storage"}))},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var r=a(3463),i=a(9795);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[839,565,983,181,275,253,441,517,358],()=>t(1557)),_N_E=e.O()}]);