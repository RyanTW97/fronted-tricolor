(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{8059:(a,e,l)=>{Promise.resolve().then(l.bind(l,7919))},7919:(a,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>s});var o=l(5155),i=l(2115);let n={Azuay:["Cuenca","Gualaceo","Paute","Santa Isabel","Chordeleg","Gir\xf3n","S\xedgsig","San Fernando","Nab\xf3n","Guachapala","Sevilla de Oro","Pucar\xe1","O\xf1a"],Bolívar:["Guaranda","San Miguel","Caluma","Echeand\xeda","Chimbo","Chillanes","Las Naves"],Cañar:["Azogues","La Troncal","Ca\xf1ar","Bibli\xe1n","El Tambo","Suscal","D\xe9leg"],Carchi:["Tulc\xe1n","San Gabriel","El \xc1ngel","Huaca","Mira","Bol\xedvar"],Chimborazo:["Riobamba","Cumand\xe1","Guano","Alaus\xed","Chambo","Pallatanga","Chunchi","Guamote","Villa La Uni\xf3n","Penipe"],Cotopaxi:["Latacunga","La Man\xe1","San Miguel de Salcedo","Pujil\xed","Saquisil\xed","Sigchos","El Coraz\xf3n"],"El Oro":["Machala","Pasaje","Santa Rosa","Huaquillas","El Guabo","Arenillas","Pi\xf1as","Zaruma","Portovelo","Marcabel\xed","Balsas","Paccha","La Victoria"],Esmeraldas:["Esmeraldas","Rosa Z\xe1rate","San Lorenzo","Atacames","Valdez","Muisne","Rioverde"],Galápagos:["Puerto Ayora","Puerto Baquerizo Moreno","Puerto Villamil"],Guayas:["Guayaquil","Dur\xe1n","Daule","Milagro","Samborond\xf3n","General Villamil (Playas)","Velasco Ibarra","El Triunfo","Naranjal","Naranjito","Balzar","Pedro Carbo","Yaguachi","Lomas de Sargentillo","Salitre","Balao","Santa Luc\xeda","Palestina","Narcisa de Jes\xfas","Sim\xf3n Bol\xedvar","Coronel Marcelino Maridue\xf1a","Colimes","Bucay","Jujan"],Imbabura:["Ibarra","Otavalo","Atuntaqui","Cotacachi","Pimampiro","Urcuqu\xed"],Loja:["Loja","Catamayo","Cariamanga","Macar\xe1","Catacocha","Alamor","Saraguro","Celica","Amaluza","Gonzanam\xe1","Chaguarpamba","Quilanga","Sozoranga","Olmedo","Chilla"],"Los R\xedos":["Quevedo","Babahoyo","Buena Fe","Ventanas","Vinces","Valencia","Puebloviejo","Mocache","Palenque","Catarama","Quinsaloma"],Manabí:["Manta","Portoviejo","Montecristi","Chone","El Carmen","Jipijapa","Jaramij\xf3","Pedernales","Bah\xeda de Car\xe1quez","Puerto L\xf3pez","Santa Ana","Rocafuerte","Tosagua","San Vicente","Flavio Alfaro","Jun\xedn","Sucre","Jama"],"Morona Santiago":["Macas","Suc\xfaa","Gualaquiza","Gral. Leonidas Plaza Guti\xe9rrez (Lim\xf3n)","Santiago de M\xe9ndez","San Juan Bosco","Logro\xf1o","Huamboya","Santiago"],Napo:["Tena","Archidona","El Chaco","Baeza","Carlos Julio Arosemena Tola"],Orellana:["El Coca","La Joya de los Sachas","Loreto","Tiputini"],Pastaza:["Puyo","Arajuno","Santa Clara","Mera"],Pichincha:["Quito","Sangolqu\xed","Cayambe","Machachi","Tabacundo","Pedro Vicente Maldonado","San Miguel de Los Bancos","Puerto Quito"],"Santa Elena":["La Libertad","Santa Elena","Salinas"],"Santo Domingo de los Ts\xe1chilas":["Santo Domingo","La Concordia"],Sucumbíos:["Nueva Loja","Shushufindi","El Dorado de Cascales","Lumbaqui","Puerto El Carmen de Putumayo","Tarapoa","La Bonita"],Tungurahua:["Ambato","Ba\xf1os de Agua Santa","Pelileo","P\xedllaro","Cevallos","Quero","Tisaleo","Mocha"],"Zamora Chinchipe":["Zamora","Yantzaza","El Pangui","Zumba","Zumbi","Guayzimi","Palanda","28 de Mayo","Paquisha"]},r={nombre:"",apellido:"",provincia:"",ciudad:"",telefono:"",callePrincipal:"",referencias:"",email:"",username:"",id:""};function s(){let[a,e]=(0,i.useState)(r),[l,s]=(0,i.useState)(!1),[t,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)([]),[m,b]=(0,i.useState)("");(0,i.useEffect)(()=>{let a=localStorage.getItem("profileData");if(a){let l=JSON.parse(a);e(l),l.provincia&&g(l.provincia)}else(async()=>{try{let a=await fetch("/api/user"),l=await a.json();l.ok?(e({...r,...l.data}),g(l.data.provincia)):alert("No se pudo cargar la informaci\xf3n del usuario.")}catch(a){console.error("Error al cargar los datos del usuario:",a),alert("Hubo un error al cargar los datos del usuario.")}})()},[]),(0,i.useEffect)(()=>{localStorage.setItem("profileData",JSON.stringify(a))},[a]);let h=a=>{let{name:l,value:o}=a.target;e(a=>({...a,[l]:o})),"provincia"===l&&g(o)},g=a=>{if(Object.prototype.hasOwnProperty.call(n,a)){let l=n[a]||[];d(l),e(a=>({...a,ciudad:l.length>0?l[0]:""}))}else d([])},p=async e=>{if(e.preventDefault(),s(!0),b(""),!a.nombre||!a.apellido||!a.telefono||!a.callePrincipal||!a.provincia||!a.ciudad){b("Por favor, completa todos los campos requeridos."),s(!1);return}try{console.log("\uD83D\uDCCC Iniciando simulaci\xf3n de guardado..."),setTimeout(()=>{console.log("✅ Simulaci\xf3n de guardado completada."),b("Perfil actualizado y bloqueado temporalmente."),u(!0),s(!1)},2e3)}catch(a){console.error("❌ Error en handleSubmit:",a),b("Hubo un error al actualizar tu perfil."),s(!1)}};return(0,o.jsxs)("div",{className:"p-8 shadow-xl bg-white rounded-xl max-w-4xl mx-auto mt-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Editar Perfil"}),(0,o.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Actualiza tu informaci\xf3n personal."}),(0,o.jsxs)("div",{className:"mb-6 px-6 py-4 bg-indigo-200 rounded-lg shadow-md",children:[(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-blue-800",children:"Nombre de usuario"}),(0,o.jsx)("p",{className:"text-gray-600 text-lg font-semibold",children:a.username})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-blue-800",children:"Correo"}),(0,o.jsx)("p",{className:"text-gray-600 text-lg font-semibold",children:a.email})]})]}),(0,o.jsxs)("form",{onSubmit:p,className:"mt-4 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[[{label:"Nombre",name:"nombre",value:a.nombre},{label:"Apellido",name:"apellido",value:a.apellido},{label:"Tel\xe9fono",name:"telefono",value:a.telefono},{label:"Calle Principal",name:"callePrincipal",value:a.callePrincipal}].map(a=>(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-indigo-700",children:a.label}),(0,o.jsx)("input",{type:"text",name:a.name,value:a.value,onChange:h,disabled:l||t,className:"mt-1 block w-full px-4 py-2 border-2 rounded-lg shadow-md focus:outline-none border-blue-500 focus:ring-2 focus:ring-blue-500"})]},a.name)),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-indigo-700",children:"Provincia"}),(0,o.jsxs)("select",{name:"provincia",value:a.provincia,onChange:h,disabled:l||t,className:"mt-1 block w-full px-4 py-2 border-2 rounded-lg shadow-md focus:outline-none border-blue-500 focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Selecciona una provincia"}),Object.keys(n).map(a=>(0,o.jsx)("option",{value:a,children:a},a))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-indigo-700",children:"Ciudad"}),(0,o.jsxs)("select",{name:"ciudad",value:a.ciudad,onChange:h,disabled:l||t,className:"mt-1 block w-full px-4 py-2 border-2 rounded-lg shadow-md focus:outline-none border-blue-500 focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Selecciona una ciudad"}),c.map(a=>(0,o.jsx)("option",{value:a,children:a},a))]})]})]}),(0,o.jsx)("button",{type:"submit",disabled:l||t,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-800 transition-all mt-6 shadow-md",children:l?"Guardando...":"Guardar Cambios"}),m&&(0,o.jsx)("p",{className:"text-center text-green-600 font-semibold mt-4",children:m})]})]})}}},a=>{var e=e=>a(a.s=e);a.O(0,[8441,1517,7358],()=>e(8059)),_N_E=a.O()}]);