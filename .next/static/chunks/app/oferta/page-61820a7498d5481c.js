(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{9667:(e,t,a)=>{Promise.resolve().then(a.bind(a,9980)),Promise.resolve().then(a.bind(a,4898))},6161:(e,t,a)=>{"use strict";a.d(t,{i:()=>i});var r=a(2115);function i(){let e="".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com","/api/products?filters[isOffer][$eq]=true&populate=*"),[t,a]=(0,r.useState)([]),[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let t=await fetch(e);if(!t.ok)throw Error("Error: ".concat(t.status," ").concat(t.statusText));let r=await t.json();a(r.data||[])}catch(e){console.error("Error fetching offer products:",e.message),s(e.message||"Error fetching data")}finally{l(!1)}})()},[e]),{loading:o,result:t,error:i}}},9980:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});var r=a(5155),i=a(2983);let s=()=>(0,r.jsx)("div",{className:"bg-gradient-radial from-blue-500 to-blue-800 ",children:(0,r.jsxs)(i.P.div,{initial:{rotate:10},animate:{rotate:-8},transition:{duration:1,type:"spring",stiffness:100},className:"relative w-full h-64 md:h-80 lg:h-[50vh] text-white overflow-hidden p-5 flex justify-center items-center",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.5,type:"spring",stiffness:120},className:"absolute flex items-center space-x-2 top-14 md:top-20 lg:top-36",children:[(0,r.jsx)(i.P.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.8,delay:.5,ease:"easeOut"},className:"w-32 md:w-44 lg:w-60 h-1 bg-yellow-400 origin-left"}),(0,r.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},className:"text-xs md:text-sm lg:text-base font-bold uppercase tracking-wide",children:"PRECIOS DE LOCURA"})]}),(0,r.jsxs)(i.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1,delay:1,type:"spring",stiffness:100},className:"relative bg-blue-300 text-white text-5xl md:text-7xl lg:text-8xl font-extrabold py-6 px-8 rounded-lg inline-block shadow-lg",children:["OFERTAS",(0,r.jsx)(i.P.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{duration:.8,delay:1.2,ease:"easeOut"},className:"absolute bottom-0 left-0 w-4/5 h-2 bg-yellow-400 origin-left -z-10"}),(0,r.jsx)(i.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:1.8,type:"spring",stiffness:80},className:"absolute bottom-[-20px] left-4 bg-yellow-400 text-blue-800 text-xs md:text-sm lg:text-base font-bold py-2 px-4 rounded transform shadow-md",children:"COMPRA AHORA"}),(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:1,delay:2.2,type:"spring",stiffness:120},className:"absolute bottom-[-40px] md:bottom-[-45px] lg:bottom-[-50px] right-4 bg-blue-700 text-yellow-300 text-xs md:text-sm lg:text-base font-bold py-3 px-6 rounded-lg text-center shadow-md",children:["HASTA",(0,r.jsx)("br",{})," 50% OFF"]})]})]})})},4898:(e,t,a)=>{"use strict";a.d(t,{default:()=>g});var r=a(5155),i=a(2115),s=a(6161),o=a(2736),l=a(5897),n=a(9070),d=a(5007),c=a(591),u=a(2983),m=a(5565),p=a(7551),x=a(7396),f=a(1068);let g=()=>{let{loading:e,result:t,error:a}=(0,s.i)(),{addItem:g}=(0,l._)(),{favorites:v,addFavorite:h,removeFavorite:y}=(0,n.r)(),[b,N]=(0,i.useState)({}),j=(e,t)=>{N(a=>({...a,[e]:t}))},w=(e,t)=>{let{attributes:a}=e,r=a.prices.find(e=>e.presentacion===t),i=(null==r?void 0:r.precio)||0;if(!i){f.oR.error("No se pudo a\xf1adir el producto al carrito");return}let s=Number(a.discountPercentage)||0;g({id:e.id,productName:a.productName,slug:a.slug,description:a.description,image:A(a.images),quantity:1,prices:[{precio:i,presentacion:t}],discountPercentage:s,discountedPrice:s>0?i-i*s/100:null}),f.oR.success("".concat(a.productName," a\xf1adido al carrito \uD83D\uDED2"))},E=(e,t)=>{t.stopPropagation();let a=v.some(t=>t.id===e.id);a?y(e.id):h(e),f.oR[a?"info":"success"]("Producto ".concat(a?"removido":"a\xf1adido"," de favoritos ❤️"))},A=e=>{var t,a,r;let i=null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:null===(t=a.attributes)||void 0===t?void 0:t.url;return i?i.startsWith("http")?i:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(i):null};return a?(0,r.jsxs)("div",{children:["Error: ",a]}):(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e&&(0,r.jsx)(o.A,{grid:4}),Array.isArray(t)&&t.map((e,t)=>{var a;if(!(null==e?void 0:e.attributes)||!e.attributes.isOffer)return null;let{id:i,attributes:s}=e,{productName:o,description:l,prices:n=[],discountPercentage:f,slug:g,images:h}=s,y=i||"product-".concat(t),N=b[i]||(n.length>0?n[0].presentacion:void 0),k=(null===(a=n.find(e=>e.presentacion===N))||void 0===a?void 0:a.precio)||"No disponible",P=f&&"No disponible"!==k?(k-k*f/100).toFixed(2):k,C=A(h),R=v.some(e=>e.id===i);return(0,r.jsx)(u.P.div,{className:"group overflow-visible relative",whileHover:{scale:1.05},transition:{duration:.3},children:(0,r.jsxs)(d.Zp,{className:"py-4 border border-gray-200 shadow-lg p-5 min-h-[450px] flex flex-col justify-between",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute top-2 right-2 p-1 rounded-full bg-white shadow-md cursor-pointer z-10",onClick:t=>E(e,t),children:(0,r.jsx)(c.A,{className:R?"text-red-600":"text-gray-400"})}),(0,r.jsx)(x.default,{href:"/product/".concat(g),children:(0,r.jsx)("div",{className:"relative h-[200px] w-full flex justify-center items-center rounded-lg",children:C?(0,r.jsx)(m.default,{src:C,alt:o||"Imagen destacada",width:200,height:250,className:"object-contain h-full w-full"}):(0,r.jsx)("p",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-600 rounded-lg",children:"Sin imagen disponible"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[o,(0,r.jsx)(p.A,{})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:l}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("span",{children:"Presentaci\xf3n: "}),n.map((e,t)=>(0,r.jsx)("button",{className:"py-1 px-3 rounded-lg text-sm ".concat(N===e.presentacion?"bg-blue-700 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),onClick:()=>j(i,e.presentacion),children:e.presentacion},"".concat(y,"-").concat(t)))]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:["$",P]}),(0,r.jsxs)("span",{className:"text-sm text-red-600 line-through",children:["$",k]})]}):(0,r.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["$",k]}),(0,r.jsx)("button",{className:"flex bg-blue-800 text-white py-1 px-6 rounded-lg hover:bg-blue-600 transition",onClick:()=>w(e,N),children:"A\xf1adir al carrito"})]})]})]})},y)})]})})}},7551:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(5155);let i=()=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("hr",{className:"border-t-2 border-gray-300 my-4"})})},2736:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(5155),i=a(5488);let s=e=>{let{grid:t}=e;return Array.from({length:t}).map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col gap-8 mx-auto space-y-3",children:[(0,r.jsx)(i.E,{className:"h-[125px] w-[250px] rounded-xl"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.E,{className:"h-4 w-[250px]"}),(0,r.jsx)(i.E,{className:"h-4 w-[250px]"})]})]},t))}},5007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>n,Zp:()=>o,aR:()=>l,wL:()=>u});var r=a(5155),i=a(2115),s=a(9602);let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...i})});o.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...i})});l.displayName="CardHeader";let n=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",a),...i})});n.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...i})});d.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...i})});c.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...i})});u.displayName="CardFooter"},5488:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var r=a(5155),i=a(9602);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},5897:(e,t,a)=>{"use strict";a.d(t,{_:()=>s});var r=a(9827),i=a(709);let s=(0,r.v)((0,i.Zr)((e,t)=>({items:[],addItem:a=>{var r,i;if(console.log("Intentando a\xf1adir producto al carrito:",a),!a||!a.id||!a.productName||!(null===(i=a.prices)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.precio)){console.error("Datos incompletos del producto:",a);return}let s=a.image||null,o={...a,image:s},l=t().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",l),l.find(e=>{var t,r,i,s;return e.id===a.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(s=a.prices)||void 0===s?void 0:null===(i=s[0])||void 0===i?void 0:i.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:l.map(e=>{var t,r,i,s;return e.id===a.id&&(null===(r=e.prices)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.presentacion)===(null===(s=a.prices)||void 0===s?void 0:null===(i=s[0])||void 0===i?void 0:i.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...l,{...o,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",t().items)},removeItem:a=>{console.log("Eliminando producto con ID:",a);let r=t().items.filter(e=>e.id!==a);e({items:r}),console.log("Estado del carrito despu\xe9s de eliminar:",r)},updateQuantity:(a,r)=>{console.log("Actualizando cantidad del producto con ID:",a,"a:",r),r<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:t().items.filter(e=>e.id!==a)})):e({items:t().items.map(e=>e.id===a?{...e,quantity:r}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",t().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",t().items)}}),{name:"cart-storage",storage:(0,i.KU)(()=>localStorage)}))},9070:(e,t,a)=>{"use strict";a.d(t,{r:()=>s});var r=a(9827),i=a(709);let s=(0,r.v)((0,i.Zr)(e=>({favorites:[],addFavorite:t=>e(e=>({favorites:[...e.favorites,t]})),removeFavorite:t=>e(e=>({favorites:e.favorites.filter(e=>e.id!==t)}))}),{name:"favorites-storage"}))},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(3463),i=a(9795);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(2115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...o,width:i,height:i,stroke:a,strokeWidth:n?24*Number(l)/Number(i):l,className:s("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:n,...d}=a;return(0,r.createElement)(l,{ref:o,iconNode:t,className:s("lucide-".concat(i(e)),n),...d})});return a.displayName="".concat(e),a}},591:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(7401).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[839,565,983,181,275,441,517,358],()=>t(9667)),_N_E=e.O()}]);