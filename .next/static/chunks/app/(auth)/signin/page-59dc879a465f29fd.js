(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{3381:(e,r,s)=>{Promise.resolve().then(s.bind(s,7881))},7881:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>f});var a=s(5155),t=s(2115),n=s(7396),i=s(6046),l=s(3254),c=s(5828);let u=(0,c.createServerReference)("408a6fb0bb90b7b4be8dbe5e3ccafd8450d8a00657",c.callServer,void 0,c.findSourceMapURL,"loginUserAction");var o=s(5007),d=s(5785),x=s(2336),m=s(9961);function h(){let{syncUser:e}=(0,l.J)(),r=(0,i.useRouter)(),[s,c]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),j=async s=>{s.preventDefault(),c(!0),f(null);let a=new FormData(s.currentTarget);try{let s=await u(a);if(s&&s.jwt)localStorage.setItem("jwt",s.jwt),await e(),r.push("/"),setTimeout(()=>{window.location.href="/"},500);else throw Error("Credenciales incorrectas.")}catch(e){console.error("Error al iniciar sesi\xf3n:",e),f("Error al iniciar sesi\xf3n. Verifica tus credenciales.")}finally{c(!1)}};return(0,a.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white shadow-md rounded-md p-6 animate-fade-in",children:[(0,a.jsx)("form",{onSubmit:j,className:"space-y-6",children:(0,a.jsxs)(o.Zp,{className:"animate-slide-in",children:[(0,a.jsxs)(o.aR,{className:"space-y-1",children:[(0,a.jsx)(o.ZB,{className:"text-3xl font-bold text-center text-gray-800",children:"Iniciar Sesi\xf3n"}),(0,a.jsx)(o.BT,{className:"text-center text-gray-600",children:"Ingresa tus datos para acceder a tu cuenta."})]}),(0,a.jsxs)(o.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"identifier",children:"Usuario o Correo"}),(0,a.jsx)(x.p,{id:"identifier",name:"identifier",type:"text",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"password",children:"Contrase\xf1a"}),(0,a.jsx)(x.p,{id:"password",name:"password",type:"password",required:!0})]}),h&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h})]}),(0,a.jsx)(o.wL,{className:"flex flex-col space-y-4",children:(0,a.jsx)(m.b,{text:"Iniciar Sesi\xf3n",loadingText:"Cargando...",disabled:s})})]})}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"bg-white px-2 text-gray-500",children:"O"})})]}),(0,a.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-600",children:["\xbfNo tienes una cuenta?",(0,a.jsx)(n.default,{href:"/signup",className:"underline ml-2 text-blue-600 hover:text-blue-700",children:"Reg\xedstrate"})]})]})}function f(){return(0,a.jsx)("div",{children:(0,a.jsx)(h,{})})}},3254:(e,r,s)=>{"use strict";s.d(r,{J:()=>l,UserProvider:()=>i});var a=s(5155),t=s(2115);let n=(0,t.createContext)(void 0),i=e=>{let{children:r}=e,[s,i]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),u=(0,t.useRef)(!1),o=(0,t.useCallback)(async()=>{if(!u.current){u.current=!0,c(!0);try{let e=await fetch("/api/user",{cache:"no-store"});if(!e.ok)throw Error("Error al obtener usuario");let r=await e.json();r.ok?i(r.data):i(null)}catch(e){console.error("Error al sincronizar usuario:",e),i(null)}finally{u.current=!1,c(!1)}}},[]);return(0,t.useEffect)(()=>{o()},[o]),(0,a.jsx)(n.Provider,{value:{user:s,setUser:i,syncUser:o},children:r})},l=()=>{let e=(0,t.useContext)(n);if(!e)throw Error("useUser debe usarse dentro de un UserProvider");return e}},6046:(e,r,s)=>{"use strict";var a=s(6658);s.o(a,"useParams")&&s.d(r,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})}},e=>{var r=r=>e(e.s=r);e.O(0,[839,181,353,441,517,358],()=>r(3381)),_N_E=e.O()}]);