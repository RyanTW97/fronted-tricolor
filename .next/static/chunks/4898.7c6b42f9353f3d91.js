"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4898],{6161:(e,r,t)=>{t.d(r,{i:()=>o});var a=t(2115);function o(){let e="".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com","/api/products?filters[isOffer][$eq]=true&populate=*"),[r,t]=(0,a.useState)([]),[o,s]=(0,a.useState)(""),[i,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let r=await fetch(e);if(!r.ok)throw Error("Error: ".concat(r.status," ").concat(r.statusText));let a=await r.json();t(a.data||[])}catch(e){console.error("Error fetching offer products:",e.message),s(e.message||"Error fetching data")}finally{l(!1)}})()},[e]),{loading:i,result:r,error:o}}},4898:(e,r,t)=>{t.r(r),t.d(r,{default:()=>x});var a=t(5155),o=t(2115),s=t(6161),i=t(2736),l=t(5897),d=t(9070),n=t(5007),c=t(591),u=t(2983),m=t(5565),p=t(7551),f=t(7396),v=t(1068);let x=()=>{let{loading:e,result:r,error:t}=(0,s.i)(),{addItem:x}=(0,l._)(),{favorites:g,addFavorite:h,removeFavorite:N}=(0,d.r)(),[y,j]=(0,o.useState)({}),b=(e,r)=>{j(t=>({...t,[e]:r}))},w=(e,r)=>{let{attributes:t}=e,a=t.prices.find(e=>e.presentacion===r),o=(null==a?void 0:a.precio)||0;if(!o){v.oR.error("No se pudo a\xf1adir el producto al carrito");return}let s=Number(t.discountPercentage)||0;x({id:e.id,productName:t.productName,slug:t.slug,description:t.description,image:A(t.images),quantity:1,prices:[{precio:o,presentacion:r}],discountPercentage:s,discountedPrice:s>0?o-o*s/100:null}),v.oR.success("".concat(t.productName," a\xf1adido al carrito \uD83D\uDED2"))},E=(e,r)=>{r.stopPropagation();let t=g.some(r=>r.id===e.id);t?N(e.id):h(e),v.oR[t?"info":"success"]("Producto ".concat(t?"removido":"a\xf1adido"," de favoritos ❤️"))},A=e=>{var r,t,a;let o=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:null===(r=t.attributes)||void 0===r?void 0:r.url;return o?o.startsWith("http")?o:"".concat("https://servidor-tricolor-64a23aa2b643.herokuapp.com").concat(o):null};return t?(0,a.jsxs)("div",{children:["Error: ",t]}):(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e&&(0,a.jsx)(i.A,{grid:4}),Array.isArray(r)&&r.map((e,r)=>{var t;if(!(null==e?void 0:e.attributes)||!e.attributes.isOffer)return null;let{id:o,attributes:s}=e,{productName:i,description:l,prices:d=[],discountPercentage:v,slug:x,images:h}=s,N=o||"product-".concat(r),j=y[o]||(d.length>0?d[0].presentacion:void 0),k=(null===(t=d.find(e=>e.presentacion===j))||void 0===t?void 0:t.precio)||"No disponible",C=v&&"No disponible"!==k?(k-k*v/100).toFixed(2):k,R=A(h),D=g.some(e=>e.id===o);return(0,a.jsx)(u.P.div,{className:"group overflow-visible relative",whileHover:{scale:1.05},transition:{duration:.3},children:(0,a.jsxs)(n.Zp,{className:"py-4 border border-gray-200 shadow-lg p-5 min-h-[450px] flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 p-1 rounded-full bg-white shadow-md cursor-pointer z-10",onClick:r=>E(e,r),children:(0,a.jsx)(c.A,{className:D?"text-red-600":"text-gray-400"})}),(0,a.jsx)(f.default,{href:"/product/".concat(x),children:(0,a.jsx)("div",{className:"relative h-[200px] w-full flex justify-center items-center rounded-lg",children:R?(0,a.jsx)(m.default,{src:R,alt:i||"Imagen destacada",width:200,height:250,className:"object-contain h-full w-full"}):(0,a.jsx)("p",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-600 rounded-lg",children:"Sin imagen disponible"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[i,(0,a.jsx)(p.A,{})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:l}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{children:"Presentaci\xf3n: "}),d.map((e,r)=>(0,a.jsx)("button",{className:"py-1 px-3 rounded-lg text-sm ".concat(j===e.presentacion?"bg-blue-700 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),onClick:()=>b(o,e.presentacion),children:e.presentacion},"".concat(N,"-").concat(r)))]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-lg font-semibold text-green-600",children:["$",C]}),(0,a.jsxs)("span",{className:"text-sm text-red-600 line-through",children:["$",k]})]}):(0,a.jsxs)("span",{className:"text-lg font-semibold text-gray-800",children:["$",k]}),(0,a.jsx)("button",{className:"flex bg-blue-800 text-white py-1 px-6 rounded-lg hover:bg-blue-600 transition",onClick:()=>w(e,j),children:"A\xf1adir al carrito"})]})]})]})},N)})]})})}},7551:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(5155);let o=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("hr",{className:"border-t-2 border-gray-300 my-4"})})},2736:(e,r,t)=>{t.d(r,{A:()=>s});var a=t(5155),o=t(5488);let s=e=>{let{grid:r}=e;return Array.from({length:r}).map((e,r)=>(0,a.jsxs)("div",{className:"flex flex-col gap-8 mx-auto space-y-3",children:[(0,a.jsx)(o.E,{className:"h-[125px] w-[250px] rounded-xl"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.E,{className:"h-4 w-[250px]"}),(0,a.jsx)(o.E,{className:"h-4 w-[250px]"})]})]},r))}},5007:(e,r,t)=>{t.d(r,{BT:()=>n,Wu:()=>c,ZB:()=>d,Zp:()=>i,aR:()=>l,wL:()=>u});var a=t(5155),o=t(2115),s=t(9602);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...o})});i.displayName="Card";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...o})});l.displayName="CardHeader";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...o})});d.displayName="CardTitle";let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...o})});n.displayName="CardDescription";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...o})});c.displayName="CardContent";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...o})});u.displayName="CardFooter"},5488:(e,r,t)=>{t.d(r,{E:()=>s});var a=t(5155),o=t(9602);function s(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-primary/10",r),...t})}},5897:(e,r,t)=>{t.d(r,{_:()=>s});var a=t(9827),o=t(709);let s=(0,a.v)((0,o.Zr)((e,r)=>({items:[],addItem:t=>{var a,o;if(console.log("Intentando a\xf1adir producto al carrito:",t),!t||!t.id||!t.productName||!(null===(o=t.prices)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.precio)){console.error("Datos incompletos del producto:",t);return}let s=t.image||null,i={...t,image:s},l=r().items;if(console.log("Estado actual del carrito antes de a\xf1adir:",l),l.find(e=>{var r,a,o,s;return e.id===t.id&&(null===(a=e.prices)||void 0===a?void 0:null===(r=a[0])||void 0===r?void 0:r.presentacion)===(null===(s=t.prices)||void 0===s?void 0:null===(o=s[0])||void 0===o?void 0:o.presentacion)})){console.log("El producto ya existe en el carrito con la misma presentaci\xf3n, actualizando cantidad..."),e({items:l.map(e=>{var r,a,o,s;return e.id===t.id&&(null===(a=e.prices)||void 0===a?void 0:null===(r=a[0])||void 0===r?void 0:r.presentacion)===(null===(s=t.prices)||void 0===s?void 0:null===(o=s[0])||void 0===o?void 0:o.presentacion)?{...e,quantity:(e.quantity||1)+1}:e})}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",r().items);return}console.log("El producto no existe en el carrito con esta presentaci\xf3n, a\xf1adi\xe9ndolo..."),e({items:[...l,{...i,quantity:1}]}),console.log("Estado del carrito despu\xe9s de a\xf1adir el producto:",r().items)},removeItem:t=>{console.log("Eliminando producto con ID:",t);let a=r().items.filter(e=>e.id!==t);e({items:a}),console.log("Estado del carrito despu\xe9s de eliminar:",a)},updateQuantity:(t,a)=>{console.log("Actualizando cantidad del producto con ID:",t,"a:",a),a<=0?(console.log("Cantidad <= 0, eliminando el producto..."),e({items:r().items.filter(e=>e.id!==t)})):e({items:r().items.map(e=>e.id===t?{...e,quantity:a}:e)}),console.log("Estado del carrito despu\xe9s de actualizar cantidad:",r().items)},removeAll:()=>{console.log("Eliminando todos los productos del carrito..."),e({items:[]}),console.log("Estado del carrito despu\xe9s de limpiar:",r().items)}}),{name:"cart-storage",storage:(0,o.KU)(()=>localStorage)}))},9070:(e,r,t)=>{t.d(r,{r:()=>s});var a=t(9827),o=t(709);let s=(0,a.v)((0,o.Zr)(e=>({favorites:[],addFavorite:r=>e(e=>({favorites:[...e.favorites,r]})),removeFavorite:r=>e(e=>({favorites:e.favorites.filter(e=>e.id!==r)}))}),{name:"favorites-storage"}))},9602:(e,r,t)=>{t.d(r,{cn:()=>s});var a=t(3463),o=t(9795);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}},7401:(e,r,t)=>{t.d(r,{A:()=>d});var a=t(2115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:n="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...i,width:o,height:o,stroke:t,strokeWidth:d?24*Number(l)/Number(o):l,className:s("lucide",n),...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),d=(e,r)=>{let t=(0,a.forwardRef)((t,i)=>{let{className:d,...n}=t;return(0,a.createElement)(l,{ref:i,iconNode:r,className:s("lucide-".concat(o(e)),d),...n})});return t.displayName="".concat(e),t}},591:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(7401).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])}}]);